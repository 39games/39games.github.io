const translations = {
  en: {
    "gamesbtn": "Games",
    "libbtn": "Discography",
    "collabbtn": "Collaborations",
    "reviewbtn": "Reviews",
    "aboutbtn": "About",
    "contactbtn": "Contact",

    "hero-title-games": "Indie Games. Fun Mechanics. Complete products.",
    "hero-desc-games": "Indie game developer focused primarily on fun, user experience, and every aspect of a shipped product.",
    "hero-title-beats": "Heavy Beats. Heavy Atmosphere.",
    "hero-desc-beats": "Beat-making project blending gritty boom bap, trap, and funky sounds.",

    "view-games": "View Games",
    "view-beats": "View Library",
    "contact": "Contact",

    "games-title": "Games by 39",
    "games-sub": "My Portfolio",

    "beats-title": "My Discography",
    "beats-sub": "Selected releases",

    "collab-title": "Collaborations",
    "collab-sub": "Artists I've produced for & worked with",

    "reviews-title": "Client Feedback",
    "reviews-sub1": "What people say on Fiverr & Upwork",
    "reviews-sub2": "(All 5-star-ratings by the way)",

    "about-title": "About Me",

    "and-more2": `<br><br>And many more!`,
    "and-more1": `<br><br>And many more projects!`,

    "about-text": `Hi! My name is <strong>Darko Stamenkovic</strong> — a game developer and music producer with a focus on shipping complete, polished projects. I specialize in gameplay systems, performance-friendly architecture, and clean, maintainable code.
<br><br>
Started coding when i was 12, over the years, I’ve published multiple games on Google Play and itch.io, handling everything from core gameplay mechanics, 3D models, art and UI systems to audio, optimization, deployment, marketing and post-launch fixes. My work emphasizes clarity, responsiveness, and player feel — systems should not only work, but feel right.
<br><br>
Alongside game development, I run <strong>39 Beats</strong>, a music project focused on old-school boom-bap hip-hop production. Music plays a large role in my life, and I feel there's always something new to bring to the table, even when it comes to genres that have existed for decades.
<br><br>
I’ve worked as a freelancer on platforms like Fiverr and Upwork, collaborating with clients worldwide on prototypes, full releases, and even taught lessons. Whether working solo or with a team, my goal is always the same: build games people will play, make beats people will rap on, and keep improving with every release.`,

    "contact-desc": "Let’s build something",
    "contact-name": "Your Name",
    "contact-email": "Your Email",
    "contact-message": "Your Message",
    "contact-send": "Send",

    "mixtape-title": "Old-school boom-bap beat-tape — svaki bit je besplatan, uz kreditaciju",

    "buybeats": "Buy Beats",

    /* ===== ADDED (BUY BEATS PAGE) ===== */
    "beats-available-title": "Available Beats",
    "beats-available-sub": "Search and filter by tags",
    "beats-search": "Search beats...",
    "beats-buy": "Buy Now",

    /* ===== ADDED (GAME CARDS) ===== */
    "game-dread-desc": "A 4v1 asymmetrical online horror game.",
    "game-nsr-desc": "Arcade mobile game collab with Lumo TV.",
    "game-moon-desc": "A game about truth and purpose.",
    "game-smash-desc": "A 2D co-op platformer/fighting game.",
    "game-gb-desc": "Arcade runner mobile game where you throw bombs at stuff.",
    "game-oa-desc": "Tower-defense strategy game about fighting off robots.",

    /* ===== GAMES DATA ===== */
    "game-dread-title": "Dread",
    "game-dread-desc1": `<br><br><p style="text-indent: 50px;"><b>Dread</b> is an asymmetrical online horror game, where four survivors must work together to escape from procedurally generated rooms while being hunted by an omnipresent entity that creates illusions of itself and even illusions of other monsters.<br><br>
<p style="text-indent: 50px;">You never know which figure is real. The monster can dematerialize and act as a ghost, silently stalking survivors as they struggle to escape.	<br><br>
<p style="text-indent: 50px;">Survivors can explore and find useful items to avoid the entity — such as shotguns, first-aid kits, and protective altars that prevent the monster from materializing while you stay near them.<br><br>
<p style="text-indent: 50px;">The game is still in development. A Steam wishlist page is coming soon. You can follow progress on YouTube, where I post short updates whenever something new is added.
    </p>`,

    "game-nutriasoulrush-title": "Nutria Soul Rush",
    "game-nutriasoulrush-desc": `<p style="text-indent: 50px;">You drive around in your car one day, and you accidentally run over a nutria on the road.<br><br>Out of it appears a spirit, cursing you to forever be stuck to your cars steering wheel.<br><br>Made with:&nbsp;<a href="https://www.youtube.com/@lumotv" target="_blank">lumoTV - YouTube</a></p>`,

    "game-themoon-title": "The Moon",
    "game-themoon-desc": `<h3 style="text-indent: 50px;">Upcoming project about truth and meaning.</h3><p style="text-indent: 50px;">The finger pointing at the moon is not the moon.</p>`,

    "game-smashtrolls-title": "Smash Trolls",
    "game-smashtrolls-desc": `<h3 style="text-indent: 50px;">Smash Trolls is a small browser 2 player platform fighting game similar to games like Smash Bros (where the game got it's name from) and Brawlhalla. All the characters are different types of Trolls with different abilities. If this game gets enough recognition I might expand it with more characters and controller support, with uploading it to steam. I also might make it online multiplayer, but I will need funding for the servers, since I'm not currently earning anything from this game.</h3>`,

    "game-goblinbarrage-title": "Goblin Barrage",
    "game-goblinbarrage-desc": `<p style="text-indent: 50px;"><strong>Goblin Barrage</strong> is an exciting and explosive game that puts you in the shoes of a goblin who has a jetpack and a bunch of bombs.</p>
<p style="text-indent: 50px;">You are stuck in a robot factory and you need to find a way out. Along the way, you will encounter different bosses who will try to stop you. You can use your jetpack to fly around and dodge the robot attacks. You can also use your bombs to destroy the robots and other targets, such as crates and buttons.</p>
<p style="text-indent: 50px;">The more you destroy, the more points you get. But be careful, the robots won’t give up easily and they will shoot at you. You have to use your jetpack and bombs smartly and make your escape.</p>
<br><br><h2>Controls:</h2>
<h3>Mobile:</h3>
<p>- Left-side of the screen to throw bombs</p>
<p>- Right-side of the screen to fly up</p>
<h3>PC:</h3>
<p>- Left mouse click to throw bombs</p>
<p>- Space to fly up</p>`,

    "game-ogreassault-title": "Ogre Assault",
    "game-ogreassault-desc": `<h1>Early Access Beta Release</h1>
<p style="text-indent: 50px;">Embark on an epic tower defense journey in Ogre Assault, where you take on the role of the mighty Ogre King defending your kingdom from the relentless onslaught of advanced robotic invaders. As the last bastion of the Ogre nation, it's up to you to defend your villagers, and yourself, from the waves of robot enemies. Collect powerful Technology Gems along your journey to upgrade your towers and villagers and fight legendary bosses who are holding them.</p>
<p style="text-indent: 50px;">The game is still actively in development and there's currently no downloadable version. Anyone who donates any amount of money will get the game for completely free on launch.<br></p>`
  
  },

  sr: {
    "gamesbtn": "Igre",
    "libbtn": "Diskografija",
    "collabbtn": "Saradnje",
    "reviewbtn": "Recenzije",
    "aboutbtn": "O meni",
    "contactbtn": "Kontakt",

    "hero-title-games": "Indie Igre. Zabavne Mehanike. Kompletni Proizvodi.",
    "hero-desc-games": "Indie game developer fokusiran na zabavu, doživljaj igrača i sve aspekte gotovog proizvoda.",
    "hero-title-beats": "Tvrdi Bitovi. Tvrda Atmosfera.",
    "hero-desc-beats": "Beat-making projekat koji meša boom bap, trap i fanki zvukove.",

    "view-games": "Pogledaj Igre",
    "view-beats": "Pogledaj Bitove",
    "contact": "Kontakt",

    "games-title": "39 Igre",
    "games-sub": "Moj Portfolio",

    "beats-title": "Moja Diskografija",
    "beats-sub": "Odabrana izdanja",

    "collab-title": "Saradnje",
    "collab-sub": "Izvođači sa kojima sam sarađivao",

    "reviews-title": "Utisci Klijenata",
    "reviews-sub1": "Šta ljudi kažu na Fiverr-u i Upwork-u",
    "reviews-sub2": "(Sve sa 5 zvezdica)",

    "about-title": "O meni",

    "and-more2": `<br><br>I još mnogo njih!`,
    "and-more1": `<br><br>I još mnogo projekata!`,

    "about-text": `Zdravo! Ja sam <strong>Darko Stamenković</strong> — game developer i muzički producent sa fokusom na objavljivanje kompletnih, celokupnih projekata. Specijalizovan sam za gameplay sisteme, arhitekturu optimizovanu za performanse i čist kod lak za održavanje.
<br><br>
Počeo sam da programiram sa 12 godina, a tokom vremena sam objavio više igara na Google Play i itch.io platformama, upravljajući svime — od osnovne mehanike igre, 3D modela, arta i UI sistema, do audia, optimizacije, objavljivanja, marketinga i post-launch popravki. Moj rad prioritizuje jasnoću i kako se igrač oseća — sistemi ne treba samo da rade, već moraju da probude osećanje.
<br><br>
Pored razvoja igara, vodim <strong>39 Beats</strong>, muzički projekat fokusiran na old-school boom-bap hip-hop produkciju. Muzika igra veliku ulogu u mom životu i smatram da uvek postoji nešto novo da se stvori, čak i u žanrovima koji postoje decenijama.
<br><br>
Radio sam kao freelancer na platformama kao što su Fiverr i Upwork, sarađujući sa klijentima širom sveta na prototipovima, punim verzijama igara, a držao sam i lekcije. Bilo da radim samostalno ili u timu, cilj je uvek isti: praviti igre koje će ljudi igrati, praviti bitove na kojima će ljudi repovati i konstantno napredovati sa svakim novim izdanjem.`,

    "contact-desc": "Napravimo nešto zajedno",
    "contact-name": "Tvoje Ime",
    "contact-email": "Tvoj Email",
    "contact-message": "Tvoja Poruka",
    "contact-send": "Pošalji",

    "mixtape-title": "Old-school boom-bap beat-tape — any beat from it is free to use, if credited.",

    "buybeats": "Kupi Bitove",

    /* ===== ADDED (BUY BEATS PAGE) ===== */
    "beats-available-title": "Dostupni Bitovi",
    "beats-available-sub": "Pretraga i filtriranje po tagovima",
    "beats-search": "Pretraži bitove...",
    "beats-buy": "Kupi",

    /* ===== ADDED (GAME CARDS) ===== */
    "game-dread-desc": "Asimetrična online horor igra 4 protiv 1.",
    "game-nsr-desc": "Arkadna mobilna igra u saradnji sa Lumo TV.",
    "game-moon-desc": "Igra o istini i svrsi.",
    "game-smash-desc": "2D co-op platform/fighting igra.",
    "game-gb-desc": "Arkadna runner mobilna igra sa bombama.",
    "game-oa-desc": "Tower-defense strategija protiv robota.",

    /* ===== GAMES DATA ===== */
    "game-dread-title": "Dread",
    "game-dread-desc1": `<br><br><p style="text-indent: 50px;"><b>Dread</b> je asimetrična online horor igra, gde četiri preživelih moraju da rade zajedno da pobegnu iz proceduralno generisanih soba dok ih lovi sveprisutno čudovište koje stvara iluzije sebe i drugih čudovišta.<br><br>
<p style="text-indent: 50px;">Nikad ne znaš koja figura je prava. Čudovište se može dematerijalizovati i delovati kao duh, tiho progoniti preživele dok pokušavaju da pobegnu.	<br><br>
<p style="text-indent: 50px;">Preživeli mogu istraživati i pronaći korisne predmete kako bi izbegli entitet — poput sačmarica, kompleta prve pomoći i zaštitnih oltara koji sprečavaju materijalizaciju čudovišta dok ste u blizini.<br><br>
<p style="text-indent: 50px;">Igra je još u razvoju. Steam wishlist stranica dolazi uskoro. Možete pratiti napredak na YouTube-u, gde objavljujem kratke update kad god se nešto novo doda.
    </p>`,

    "game-nutriasoulrush-title": "Nutria Soul Rush",
    "game-nutriasoulrush-desc": `<p style="text-indent: 50px;">Jednog dana vozite se kolima i slučajno zgazite nutriju na putu.<br><br>Iz nje izlazi duh, proklinjući vas da zauvek budete vezani za volan vašeg automobila.<br><br>Napravljen uz:&nbsp;<a href="https://www.youtube.com/@lumotv" target="_blank">lumoTV - YouTube</a></p>`,

    "game-themoon-title": "The Moon",
    "game-themoon-desc": `<h3 style="text-indent: 50px;">Nadolazeći projekat o istini i smislu.</h3><p style="text-indent: 50px;">Prst koji pokazuje na mesec nije mesec.</p>`,

    "game-smashtrolls-title": "Smash Trolls",
    "game-smashtrolls-desc1": `<h3 style="text-indent: 50px;">Smash Trolls je mala browser 2-player platform/fighting igra slična igrama poput Smash Bros i Brawlhalla. Svi likovi su različite vrste trollova sa različitim sposobnostima. Ako igra dobije dovoljno priznanja, možda ću je proširiti sa više likova i podrškom za kontroler, i uploadovati na Steam. Takođe možda online multiplayer, ali biće potrebna sredstva za servere, jer trenutno ne zarađujem ništa od ove igre.</h3>`,

    "game-goblinbarrage-title": "Goblin Barrage",
    "game-goblinbarrage-desc": `<p style="text-indent: 50px;"><strong>Goblin Barrage</strong> je uzbudljiva i eksplozivna igra koja stavlja igrača u ulogu goblina sa džetpakom i gomilom bombi.</p>
<p style="text-indent: 50px;">Zaglavili ste u fabrici robota i morate pronaći izlaz. Na putu ćete sresti različite šefove koji će pokušati da vas zaustave. Možete koristiti džetpak da letite i izbegavate napade robota. Takođe možete koristiti bombe da uništite robote i druge ciljeve, poput sanduka i dugmadi.</p>
<p style="text-indent: 50px;">Što više uništite, više poena dobijate. Ali pazite, roboti se neće lako predati i pucaju na vas. Morate pametno koristiti džetpak i bombe kako biste pobegli.</p>
<br><br><h2>Kontrole:</h2>
<h3>Mobilni:</h3>
<p>- Leva strana ekrana za bacanje bombi</p>
<p>- Desna strana ekrana za letenje</p>
<h3>PC:</h3>
<p>- Levi klik mišem za bacanje bombi</p>
<p>- Space za letenje</p>`,

    "game-ogreassault-title": "Ogre Assault",
    "game-ogreassault-desc": `<h1>Rana Beta verzija</h1>
<p style="text-indent: 50px;">Krenite u epsko tower defense putovanje u Ogre Assault, gde preuzimate ulogu moćnog Ogre Kralja i branite svoje kraljevstvo od neprekidnog napada naprednih robotskih napadača. Kao poslednji bastion Ogre nacije, na vama je da branite svoje seljake i sebe od talasa robotskih neprijatelja. Sakupljajte moćne Technology Gems kako biste unapredili svoje kule i seljake i borili se protiv legendardnih šefova.</p>
<p style="text-indent: 50px;">Igra je još uvek u aktivnom razvoju i trenutno nema verziju za preuzimanje. Svako ko donira bilo koju sumu će dobiti igru potpuno besplatno po izlasku.<br></p>`
  }
};


const langBtn = document.getElementById('lang-btn');
const langDropdown = document.getElementById('lang-dropdown');
const currentFlag = document.getElementById('current-flag');

// Toggle dropdown
langBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    langDropdown.classList.toggle('show');
});

// Switch language
document.querySelectorAll('.lang-option').forEach(option => {
    option.addEventListener('click', (e) => {
        e.stopPropagation();
        const lang = option.dataset.lang;
        setLanguage(lang);
        langDropdown.classList.remove('show');
    });
});

function setLanguage(lang) {
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        const translation = translations[lang]?.[key];
        if (!translation) return;

        if (el.hasAttribute('placeholder')) {
            el.placeholder = translation;
        } else {
            el.innerHTML = translation;
        }
    });

    currentFlag.src =
        lang === 'sr'
            ? 'https://flagcdn.com/rs.svg'
            : 'https://flagcdn.com/gb.svg';

    localStorage.setItem('preferredLang', lang);
}

// Init language ONCE
(function initLanguage() {
    const savedLang = localStorage.getItem('preferredLang');
    if (savedLang) {
        setLanguage(savedLang);
        return;
    }

    // Fallback auto-detect
    fetch('https://ipapi.co/json/')
        .then(res => res.json())
        .then(data => {
            const balkans = ['RS', 'BA', 'HR', 'ME'];
            setLanguage(balkans.includes(data.country_code) ? 'sr' : 'en');
        })
        .catch(() => setLanguage('en'));
})();

// Close dropdown when clicking outside
window.addEventListener('click', () => {
    langDropdown.classList.remove('show');
});